extends Control
@onready var ttyanim: AnimationPlayer = $TTYAnimation
@onready var tty: TextEdit = $TTY/Text/RichTextLabel
@onready var parent: Control = get_parent()
@onready var title: Button = $TTY/Text/Title/HBoxContainer/Title
@onready var env_buttons: ButtonGroup = $Menu/Control/VBoxContainer/env1.button_group
@onready var babunebash: BabuneBash = BabuneBash.new(self, tty, env_buttons, title)

# Called when the node enters the scene tree for the first time.
func _ready():
	$Template.hide()
	global_position = Vector2.ZERO

func _input(event):
	babunebash.input(event)

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	babunebash.input_process()
	# TODO: Fix this goofy ahh caveman and the other one on the ready function
	#if player_ui.global_position.x >= CAV.screen_resolution.x - player_ui_tty.size.x:
	#	player_ui.global_position.x = CAV.screen_resolution.x - player_ui_tty.size.x
	#elif player_ui.global_position.x <= 0.0 + player_ui_tty.size.x:
	#	player_ui.global_position.x = CAV.screen_resolution.x + player_ui_tty.size.x
	#if player_ui.global_position.y >= CAV.screen_resolution.y - player_ui_tty.size.y:
	#	player_ui.global_position.y = CAV.screen_resolution.y - player_ui_tty.size.y
	#elif player_ui.global_position.y <= 0.0 + player_ui_tty.size.y:
	#	player_ui.global_position.y = CAV.screen_resolution.y + player_ui_tty.size.y
	# Panel x offset
	ttyanim.speed_scale = 1/Engine.time_scale

func anim_open():
	ttyanim.play("toggle")
func anim_close():
	ttyanim.play_backwards("toggle")
