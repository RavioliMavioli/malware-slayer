class_name BabuneBash extends Resource
# BabuneBash (Bash but not exactly bash shell)
# A script that mimicks bash shell language and UNIX commands

var tty: TextEdit
var button_group: ButtonGroup
var title: Button
var node: Control

func _init(_node: Control, _tty: TextEdit, _button_group: ButtonGroup, _title: Button):
	node = _node
	button_group = _button_group
	title = _title
	tty = _tty

func input(event: InputEvent):
	if event.is_action_pressed("Enter"):
		tty.text = ""

func input_process():
	# TODO: Fix this caveman bs
	if (Input.is_action_pressed("CTRL") and Input.is_action_just_pressed("W")) or Input.is_action_just_pressed("ui_up"):
		var buttons: Array = button_group.get_buttons()
		var pressed_button: Button = button_group.get_pressed_button()
		var current_button_index: int = buttons.find(pressed_button,0)
		var new_button_index: int = wrapi(current_button_index - 1, 0, buttons.size())
			
		pressed_button.button_pressed = false
			
		buttons[new_button_index].button_pressed = true
		
	if (Input.is_action_pressed("CTRL") and Input.is_action_just_pressed("S")) or Input.is_action_just_pressed("ui_down"):
		var buttons: Array = button_group.get_buttons()
		var pressed_button: Button = button_group.get_pressed_button()
		var current_button_index: int = buttons.find(pressed_button,0)
		var new_button_index: int = wrapi(current_button_index + 1, 0, buttons.size())
			
		pressed_button.button_pressed = false
			
		buttons[new_button_index].button_pressed = true
			
	title.text = " " + button_group.get_pressed_button().text + " "
	
