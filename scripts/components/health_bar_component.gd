extends Node2D

var entity:Node:
	get: return owner
var health:HealthComponent:
	get: return entity.get_node("%HealthComponent")
var progress:TextureProgressBar:
	get: return %ProgressBar

func _ready() -> void:
	health.changed.connect(_on_change)
	update()

func update():
	progress.max_value = health.max_value
	progress.value = health.value
	if health.is_dead:
		hide()

func _on_change(change:HealthComponent.Result):
	update()
