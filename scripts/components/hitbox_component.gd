extends Area2D

@export var health_component: HealthComponent
@onready var parent_entity: CharacterBody2D = get_parent() as CharacterBody2D

func hit(damage: int, hit_position: Vector2, knockback_factor: int):
	damaged(damage)
	knockback(hit_position, knockback_factor)
	hit_animation()
	
func damaged(damage: int):
	health_component.health -= damage
	
func knockback(hit_position: Vector2, knockback_factor: int):
	match health_component.type:
		health_component.entity_type.PLAYER:
			pass
		health_component.entity_type.ENEMY:
			pass
		health_component.entity_type.BOSS:
			pass
		health_component.entity_type.ENTITY:
			pass
	
func hit_animation():
	
	match health_component.type:
		health_component.entity_type.PLAYER:
			pass
		health_component.entity_type.ENEMY:
			pass
		health_component.entity_type.BOSS:
			pass
		health_component.entity_type.ENTITY:
			pass

	#var cooldown:Tween = create_tween()
	
	#parent_entity.modulate =  Color(2, 2, 2)
	
	#cooldown.tween_property(parent_entity, "modulate:a", 0.0, 0.3)
	#cooldown.finished.connect(Callable(ghost_tween_complete).bind(self))
	
	
	if parent_entity.has_method("hit_animation"):
		parent_entity.hit_animation()
