class_name PlayerMovementControls extends Resource

var player: PlayerClass

func _init(_player: PlayerClass) -> void:
	player = _player

func process(delta: float) -> void:
	_run(delta)
	_cap_to_terminal_velocity()

func _run(delta: float) -> void:
	var SPEED_devider: int = 6 if player.is_on_floor() else 12
	player.direction = Input.get_axis("Left", "Right") as int
	player.velocity.x = move_toward(player.velocity.x,
									player.direction * player.RUNNING_SPEED,
									player.RUNNING_SPEED/(SPEED_devider if player.direction else SPEED_devider * 2)	)
		
func _cap_to_terminal_velocity() -> void:
	player.velocity = Vector2(	min(abs(player.velocity.x), player.TERMINAL_VELOCITY) * sign(player.velocity.x) ,
								min(abs(player.velocity.y), player.TERMINAL_VELOCITY) * sign(player.velocity.y) )
